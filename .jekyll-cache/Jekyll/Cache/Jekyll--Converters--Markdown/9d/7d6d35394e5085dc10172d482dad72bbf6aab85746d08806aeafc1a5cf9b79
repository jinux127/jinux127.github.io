I"Œz<p>ì±„íŒ… ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë³´ê³  ì‹¶ì–´ì ¸ì„œ êµ¬ê¸€ì— ê°€ì¥ ë¨¼ì € ë‚˜ì˜¤ëŠ” ë¸”ë¡œê·¸ë¥¼ ì°¸ì¡°í•´ êµ¬í˜„í•´ë´¤ë‹¤.</p>

<ul>
  <li>ì°¸ì¡°í•œ ë¸”ë¡œê·¸: https://geundung.dev/58?category=719250</li>
</ul>

<p>Node.jsë¥¼ ì‚¬ìš©í•˜ëŠ” ë° ì²˜ìŒ ì‚¬ìš©í•´ë´ì„œ ë§ì´ ë²„ë²…ê±°ë ¸ì§€ë§Œ ì¬ë¯¸ìˆëŠ” ê²½í—˜ì´ì—ˆë‹¤.</p>

<h1 id="appjs">app.js</h1>

<blockquote>
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Node.js ê¸°ë³¸ ë‚´ì¥ ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°</span>
<span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">//express ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°</span>
<span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">//Node.js ê¸°ë³¸ ë‚´ì¥ ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°</span>
<span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">// socket.io ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°</span>
<span class="kd">const</span> <span class="nx">socket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">socket.io</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">//express ê°ì²´ ìƒì„±</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>

<span class="c1">// express http ì„œë²„ ìƒì„±</span>
<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">app</span><span class="p">)</span>

<span class="c1">// ìƒì„±ëœ ì„œë²„ë¥¼ socket.ioì— ë°”ì¸ë”©</span>
<span class="kd">const</span> <span class="nx">io</span> <span class="o">=</span> <span class="nx">socket</span><span class="p">(</span><span class="nx">server</span><span class="p">)</span>
</code></pre></div>  </div>

  <p>require ì€ ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ëŠ”ë° ë‹¤ë¥¸ js íŒŒì¼ì— ìˆëŠ” ëª¨ë“ˆì„ ë³µì‚¬í•´ exportsí•œë‹¤.</p>

  <ul>
    <li>ì°¸ì¡° : https://medium.com/@chullino/require-exports-module-exports-%EA%B3%B5%EC%8B%9D%EB%AC%B8%EC%84%9C%EB%A1%9C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-1d024ec5aca3</li>
  </ul>

  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/css</span><span class="dl">'</span><span class="p">,</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">./static/css</span><span class="dl">'</span><span class="p">))</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/js</span><span class="dl">'</span><span class="p">,</span><span class="nx">express</span><span class="p">.</span><span class="kd">static</span><span class="p">(</span><span class="dl">'</span><span class="s1">./static/js</span><span class="dl">'</span><span class="p">))</span>
</code></pre></div>  </div>

  <p>css íŒŒì¼ê³¼ js íŒŒì¼ê³¼ ê°™ì€ ì •ì  íŒŒì¼ì„ ì œê³µí•´ì¤€ë‹¤.</p>

  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Getë°©ì‹ìœ¼ë¡œ / ê²½ë¡œì— ì ‘ì†í•˜ë©´ ì‹¤í–‰</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="nx">response</span><span class="p">){</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="dl">'</span><span class="s1">./static/index.html</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="nx">data</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
            <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">ì—ëŸ¬</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">text/html</span><span class="dl">'</span><span class="p">})</span>
            <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
            <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="p">})</span>
</code></pre></div>  </div>

  <p>/ ê²½ë¡œë¡œ ë“¤ì–´ì˜¬ê²½ìš° ì‹¤í–‰ í•´ì¤€ë‹¤.</p>

  <p>response.writeHead í—¤ë” ì„¤ì •.</p>

  <p>response.write í™”ë©´ì— ë…¸ì¶œí•  ê²°ê³¼ ê°’</p>

  <p>response.end ë°ì´í„°ì˜ ë§ˆì§€ë§‰ì„ ì„ íƒì ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆìŒ</p>

  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//io.socket.on &gt;&gt; io.on ìˆ˜ì •</span>
<span class="nx">io</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connection</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">socket</span><span class="p">)</span> <span class="p">{</span>

    <span class="cm">/* ìƒˆë¡œìš´ ìœ ì €ê°€ ì ‘ì†í–ˆì„ ê²½ìš° ë‹¤ë¥¸ ì†Œì¼“ì—ê²Œë„ ì•Œë ¤ì¤Œ */</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">newUser</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> ë‹˜ì´ ì ‘ì†í•˜ì˜€ìŠµë‹ˆë‹¤.</span><span class="dl">'</span><span class="p">)</span>
  
      <span class="cm">/* ì†Œì¼“ì— ì´ë¦„ ì €ì¥í•´ë‘ê¸° */</span>
      <span class="nx">socket</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span>
  
      <span class="cm">/* ëª¨ë“  ì†Œì¼“ì—ê²Œ ì „ì†¡ */</span>
      <span class="nx">io</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">update</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">connect</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SERVER</span><span class="dl">'</span><span class="p">,</span> <span class="na">message</span><span class="p">:</span> <span class="nx">name</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">ë‹˜ì´ ì ‘ì†í•˜ì˜€ìŠµë‹ˆë‹¤.</span><span class="dl">'</span><span class="p">})</span>
    <span class="p">})</span>
  
    <span class="cm">/* ì „ì†¡í•œ ë©”ì‹œì§€ ë°›ê¸° */</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="cm">/* ë°›ì€ ë°ì´í„°ì— ëˆ„ê°€ ë³´ëƒˆëŠ”ì§€ ì´ë¦„ì„ ì¶”ê°€ */</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">socket</span><span class="p">.</span><span class="nx">name</span>
      
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>

      <span class="cm">/* ë³´ë‚¸ ì‚¬ëŒì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ìœ ì €ì—ê²Œ ë©”ì‹œì§€ ì „ì†¡ */</span>
      <span class="nx">socket</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">update</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="p">})</span>
  
    <span class="cm">/* ì ‘ì† ì¢…ë£Œ */</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">disconnect</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">ë‹˜ì´ ë‚˜ê°€ì…¨ìŠµë‹ˆë‹¤.</span><span class="dl">'</span><span class="p">)</span>
  
      <span class="cm">/* ë‚˜ê°€ëŠ” ì‚¬ëŒì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ìœ ì €ì—ê²Œ ë©”ì‹œì§€ ì „ì†¡ */</span>
      <span class="nx">socket</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">update</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">disconnect</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SERVER</span><span class="dl">'</span><span class="p">,</span> <span class="na">message</span><span class="p">:</span> <span class="nx">socket</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">ë‹˜ì´ ë‚˜ê°€ì…¨ìŠµë‹ˆë‹¤.</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">})</span>
  <span class="p">})</span>


<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">ì„œë²„ ì‹¤í–‰ì¤‘...</span><span class="dl">'</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div>  </div>

  <p>io.on ë¶€ë¶„ì€ ì§§ê²Œë„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì„œ ìˆ˜ì •í–ˆë‹¤.</p>

  <blockquote>
    <ul>
      <li>ì°¸ê³ </li>
    </ul>

    <p>Previously:</p>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">io</span><span class="p">.</span><span class="nx">sockets</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">eventname</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">eventdata</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>    </div>

    <p>Now:</p>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">io</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">eventname</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">eventdata</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>    </div>

    <p>https://socket.io/docs/v2/migrating-from-0-9/index.html</p>
  </blockquote>
</blockquote>

<h1 id="indexjs">index.js</h1>

<blockquote>
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">socket</span> <span class="o">=</span> <span class="nx">io</span><span class="p">()</span>

<span class="cm">/* ì ‘ì† ë˜ì—ˆì„ ë•Œ ì‹¤í–‰ */</span>
<span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connect</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

 <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="dl">'</span><span class="s1">ë°˜ê°‘ìŠµë‹ˆë‹¤!</span><span class="dl">'</span><span class="p">,</span><span class="dl">''</span><span class="p">)</span>
 
 <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">name</span><span class="p">){</span>
     <span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ìµëª…</span><span class="dl">'</span>
 <span class="p">}</span>

 <span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">newUser</span><span class="dl">'</span> <span class="p">,</span><span class="nx">name</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div>  </div>

  <p>connect ë˜ë©´ ì‹¤í–‰ëœë‹¤</p>

  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">update</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>

 <span class="kd">var</span> <span class="nx">chat</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">chat</span><span class="dl">'</span><span class="p">)</span>

 <span class="kd">var</span> <span class="nx">message</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">)</span>
 <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
 <span class="kd">var</span> <span class="nx">className</span> <span class="o">=</span> <span class="dl">''</span>

 <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span>
 
 <span class="c1">// íƒ€ì…ì— ë”°ë¼ ì ìš©í•  í´ë˜ìŠ¤ë¥¼ ë‹¤ë¥´ê²Œ ì§€ì •</span>
 <span class="k">switch</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">case</span> <span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">:</span>
     <span class="nx">className</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">other</span><span class="dl">'</span>
     <span class="k">break</span>

   <span class="k">case</span> <span class="dl">'</span><span class="s1">connect</span><span class="dl">'</span><span class="p">:</span>
     <span class="nx">className</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">connect</span><span class="dl">'</span>
     <span class="k">break</span>

   <span class="k">case</span> <span class="dl">'</span><span class="s1">disconnect</span><span class="dl">'</span><span class="p">:</span>
     <span class="nx">className</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">disconnect</span><span class="dl">'</span>
     <span class="k">break</span>
 <span class="p">}</span>

 <span class="nx">message</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span>
 <span class="nx">message</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span>
 <span class="nx">chat</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
<span class="p">})</span>

</code></pre></div>  </div>

  <p>updateì¼ ê²½ìš° ì‹¤í–‰, ë©”ì‹œì§€ì˜ íƒ€ì…ì„ êµ¬ë³„í•´ ë©”ì‹œì§€ì˜ ì¢…ë¥˜ì— ë”°ë¼ cssë¥¼ ë‹¤ë¥´ê²Œ ì ìš©í•´ì¤€ë‹¤.</p>

  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* ì „ì†¡ í•¨ìˆ˜ */</span>
<span class="kd">function</span> <span class="nx">send</span><span class="p">()</span> <span class="p">{</span>
 <span class="c1">// ì…ë ¥ë˜ì–´ìˆëŠ” ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</span>
 <span class="kd">var</span> <span class="nx">message</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span>
 
 <span class="c1">// ê°€ì ¸ì™”ìœ¼ë‹ˆ ë°ì´í„° ë¹ˆì¹¸ìœ¼ë¡œ ë³€ê²½</span>
 <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">msg</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="dl">''</span>

 <span class="kd">var</span> <span class="nx">chat</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">chat</span><span class="dl">'</span><span class="p">)</span>
 <span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">)</span>
 <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
 <span class="nx">msg</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">'</span><span class="s1">me</span><span class="dl">'</span><span class="p">)</span>
 <span class="nx">msg</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span>
 <span class="nx">chat</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span>

 <span class="c1">// ì„œë²„ë¡œ send ì´ë²¤íŠ¸ ì „ë‹¬ + ë°ì´í„°ì™€ í•¨ê»˜</span>
 <span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="na">message</span><span class="p">:</span> <span class="nx">message</span><span class="p">})</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">enterkey</span><span class="p">()</span> <span class="p">{</span>
 <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">13</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// ì—”í„°í‚¤ê°€ ëˆŒë ¸ì„ ë•Œ ì‹¤í–‰í•  ë‚´ìš©</span>
      <span class="nx">send</span><span class="p">();</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>  </div>

  <p>javascript ë¬¸ë²•ì˜ appendChild, classList.add ë“±ì„ ì‚¬ìš©í•´ì„œ htmlì†ì„± ì¶”ê°€ë¥¼ í•´ì¤˜ ë©”ì‹œì§€ë¥¼ í‘œí˜„í•´ì¤€ë‹¤.</p>

  <p>ì—”í„°í‚¤ë¥¼ ëˆ„ë¥¼ ê²½ìš° ë°”ë¡œ ì…ë ¥ë˜ëŠ” í•¨ìˆ˜ë„ ë§Œë“¤ì–´ì£¼ì—ˆë‹¤.  ìœ„ì˜ ê²½ìš°ì—” ì—”í„°í‚¤ë¥¼ ëˆ„ë¥¼ ê²½ìš° send()ë¥¼ ì‹¤í–‰í•´ì¤€ë‹¤.</p>
</blockquote>

<h1 id="indexhtml">index.html</h1>

<blockquote>
  <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>ì±„íŒ…<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"shortcut icon"</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"/css/index.css"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/socket.io/socket.io.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/js/index.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"main"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"chat"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- ì±„íŒ… ë©”ì‹œì§€ ì˜ì—­ --&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"msg"</span> <span class="na">onkeyup=</span><span class="s">"enterkey()"</span> <span class="na">placeholder=</span><span class="s">"ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.."</span><span class="nt">&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"send()"</span><span class="nt">&gt;</span>ì „ì†¡<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</code></pre></div>  </div>

  <p>textì˜ onkeyupì˜ ì„¤ì •ì— ë§Œë“¤ì–´ ì£¼ì—ˆë˜ enterkeyí•¨ìˆ˜ë¥¼ ì ìš©í•´ì¤¬ë‹¤.</p>
</blockquote>

<h1 id="indexcss">index.css</h1>

<blockquote>
  <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/* ë©”ì¸ */</span>
<span class="nf">#main</span> <span class="p">{</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">lightblue</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">500px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">700px</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* ì±„íŒ… ì˜ì—­ */</span>
<span class="nf">#chat</span> <span class="p">{</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">90%</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">overflow-y</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* ì ‘ì† ì•Œë¦¼ */</span>
<span class="nc">.connect</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">90%</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">aquamarine</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* ì ‘ì† ì¢…ë£Œ ì•Œë¦¼ */</span>
<span class="nc">.disconnect</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">90%</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">indianred</span><span class="p">;</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* ë‚´ê°€ ë³´ë‚¸ ë©”ì‹œì§€ */</span>
<span class="nc">.me</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">90%</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">lemonchiffon</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* ìƒëŒ€ë°©ì´ ë³´ë‚¸ ë©”ì‹œì§€ */</span>
<span class="nc">.other</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">90%</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>
  <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div>  </div>

  <p>ê·¸ì™¸ css íŒŒì¼ì´ë‹¤</p>

  <blockquote>
    <p>.</p>

    <p>í´ë˜ìŠ¤ ì§€ì •</p>
  </blockquote>

  <blockquote>
    <p>#</p>

    <p>ì•„ì´ë”” ì§€ì •</p>
  </blockquote>
</blockquote>

<p>ë¹ ë¥´ê²Œ ë§Œë“¤ì–´ë³´ë ¤ê³  í–ˆì§€ë§Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ê²½ìš° ì œëŒ€ë¡œ ê³µë¶€ë¥¼ í•´ë³´ì§€ì•Šì•„ ë²„ë²…ê±°ë¦° ë©´ì´ ë§ì•„ ê³µë¶€í•  í•„ìš”ì„±ì„ ëŠë¼ê²Œ í•´ì¤¬ë‹¤.</p>

<p>íŠ¹íˆ</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
</code></pre></div></div>

<p>ì´ ë¶€ë¶„ì—ì„œ ì—ëŸ¬ê°€ ëœ¨ëŠ”ë° `` ì´ ê¸°í˜¸ì™€ â€˜â€™ ì´ ê¸°í˜¸ì˜ ì°¨ì´ì ì„ ì˜ ëª°ë¼ì„œ í—¤ë§¤ì—ˆë‹¤.</p>

<blockquote>
  <p>`` ì˜ ì‚¬ìš©ë²•</p>

  <ul>
    <li>ì°¸ê³  : https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Template_literals</li>
  </ul>
</blockquote>

<blockquote>
  <p>ì „ì²´ ì½”ë“œ : https://github.com/jinux127/CHAT.git</p>
</blockquote>

:ET